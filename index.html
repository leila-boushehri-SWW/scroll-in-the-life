<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>A Scroll in the Life</title>
  <meta name="description" content="A simple, accessible, vertical feed for curated social posts and videos related to vision care." />

  <!-- Connection hints for third‚Äëparty embeds -->
  <link rel="dns-prefetch" href="https://www.tiktok.com">
  <link rel="preconnect" href="https://www.tiktok.com" crossorigin>
  <link rel="dns-prefetch" href="https://www.instagram.com">
  <link rel="preconnect" href="https://www.instagram.com" crossorigin>
  <link rel="dns-prefetch" href="https://platform.twitter.com">
  <link rel="preconnect" href="https://platform.twitter.com" crossorigin>
  <link rel="dns-prefetch" href="https://cdn.syndication.twimg.com">
  <link rel="preconnect" href="https://cdn.syndication.twimg.com" crossorigin>

  <style>
    html, body { height: 100%; margin: 0; }
    body { font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#fff; color:#111; }
    #feed {
      height: auto;
      overflow-y: auto;
      /* scroll-snap-type: y mandatory; */
      /* scroll-behavior: smooth; */
      /* -webkit-overflow-scrolling: touch; */
      background: #fff;
    }
    .card {
      display: flex;
      flex-direction: column;
      box-sizing: border-box;
      margin-bottom: 28px; /* Add space between posts */
    }
    .card-scroll {
      flex: 1;
      overflow-y: auto;
      overscroll-behavior: contain;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px;
      box-sizing: border-box;
    }
    .card-scroll > * {
      max-width: 540px;
      width: 100%;
    }
    .mediaWrap {
      display:flex; align-items:center; justify-content:center; width:100%;
    }
    .mediaWrap > * { max-width: 540px; width: 100%; }
    .tt-player {
      width: 100%;
      aspect-ratio: 9 / 16;
      border: 0;
      overflow: hidden;
      pointer-events: auto;
    }
    .tiktok-embed, .instagram-media, .twitter-tweet { max-width:540px; width:100%; margin:0 auto; }
    footer { text-align:center; padding: 12px 0; color:#555; }
  
    /* --- Text Insight card styling --------------------------------------- */
    .insight {
      width: 100%;
      max-width: 540px;
      background: #f7f7f7;
      border: 1px solid #e6e6e6;
      border-radius: 12px;
      padding: 16px 18px;
      box-shadow: 0 1px 2px rgba(0,0,0,.04);
    }
    .insight h2 {
      margin: 0 0 8px 0;
      font-size: 27px;
      line-height: 1.25;
    }
    .insight p {
      margin: 0;
      font-size: 14px;
      margin-top: 1em;
      color: #333;
    }
    .insight .brand-header {
      display: block;
      margin: 0 auto 12px;
      max-width: 100%;
    }
    .tiktok-touch-guard {
      position: relative;
      width: 100%;
      aspect-ratio: 9 / 16;
      max-height: 90vh;
      overflow: hidden;
    }
    .tiktok-touch-guard iframe {
      pointer-events: none; /* üëà prevents scroll hijack */
    }
    .tiktok-touch-guard:focus-within iframe,
    .tiktok-touch-guard:hover iframe {
      pointer-events: auto; /* üëà re-enable interaction on hover/tap */
    }
  </style>
</head>
<body>
  <main id="feed" aria-live="polite"></main>
  <footer>Built by Sense Worldwide.</footer>

  <template id="cardTpl">
    <article class="card" tabindex="0" aria-busy="true">
      <div class="card-scroll">
        <div class="mediaWrap"></div>
      </div>
    </article>
  </template>

  <script>
  (() => {
    'use strict';

    // --- Feed with text insights ------------------------------------------------------
    
    const FEED = [
      {type: 'insight',
        title: 'Gen Z live on their phones for over six hours a day.', 
        text: 'Welcome to the digital world of your Gen Z consumer, a fast-moving vessel of culture. It\'s not just photos and \
        captions, but a multilayered ecosystem filled with hidden codes and double meanings. It\'s oddly specific, and to truly \
        understand it, you have to immerse yourself. Context matters. Every post, whether a meme, a vulnerable story, or a \
        playful trend, is part of an ongoing conversation built on internet language, inside jokes, and cultural nods. \
        \\n\\n **This feed has been curated to give you a glimpse into how they engage online:** \
        \\n\\n What\'s going viral? \
        \\n\\n Who are they listening to? \
        \\n\\n What communities are they immersing themselves in? \
        \\n\\n How does the content they consume shape and inspire their opinions, attitudes, and behaviours? \
        \\n\\n What captures their attention? \
        \\n\\n And how do they reinterpret the world through the lens of memes and internet syntax? \
        \\n\\n By stepping into their digital world, we can see not only what grabs their attention, but what truly \
        resonates, influences their decisions, and inspires them to participate.' },
      { type: 'twitter', url: 'https://x.com/stop_sweeps_atx/status/1120153413898186752' },
      { type: 'tiktok', videoId: '7512105436674362655' },
      // { type: 'tiktok', videoId: '7519269824963317022' },
      // { type: 'tiktok', videoId: '7504960819571084566' },
      // { type: 'tiktok', videoId: '7478314772165971222' },
      // { type: 'tiktok', videoId: '7505130824665140482' },
      { type: 'image', src: 'images/27eada12a6d29da05b2b9ae1644347a4.jpeg' },
      { type: 'instagram', url: 'https://www.instagram.com/p/DJ6pR51g2ED/' },
      { type: 'insight', 
        title: '1. Who are they listening to?', 
        text: 'Gen Z immerse themsevles in an online ecosystem of influencers, content creators, micro communities, and celebrities.' },
      { type: 'insight', 
        title: '1.1. Influencers', 
        text: 'Influencers drive opinions and consumer choices by being relatable, aspirational, or niche experts. For users, it\‚Äôs simple: *‚ÄúI want what they have.‚Äù*' },
      { type: 'image', src: 'images/Screenshot 2025-08-21 at 17.39.15.png' },
      { type: 'image', src: 'images/IMG_8903.png' },      
      { type: 'tiktok', videoId: '7529954417701866774' },
      { type: 'insight', 
        title: '1.2. Content Creators',
        text: 'A content creator is anyone who shares content publicly. Unlike influencers, their goal isn\‚Äôt to drive consumer choices \
        but to entertain, educate, express, or tell stories. Users engage because *‚ÄúI like how they make me feel.‚Äù*' },
      { type: 'tiktok', videoId: '7500244332872617262' },
      { type: 'tiktok', videoId: '7532946927286111518' },
      { type: 'tiktok', videoId: '7513955742299344158' },
      { type: 'insight', 
        title: '1.3. Micro-Communities',
        text: 'People engage with micro communities that align with their interests. On Reddit this looks like joining communities, \
        on TikTok and Instagram this translates through the algorithm. As Gen Z would say, *"I built this FYP brick by brick"*. ' },
      { type: 'image', src: 'images/Screenshot 2025-08-20 at 12.35.45.png' },
      { type: 'image', src: 'images/Screenshot 2025-08-21 at 17.17.21.png' },
      { type: 'image', src: 'images/Screenshot 2025-08-21 at 16.56.40.png' },
      { type: 'insight', 
        title: '2. Inspiration and Learning', 
        text: 'Over and above entertainment, Gen Z take to the scroll to educate themselves and source inspiration.' },
      { type: 'insight', 
        title: '2.1. Inspiration', 
        text: 'The breadth of voices allow for microcommunities and content tailored to hyper specific interests.' },
      { type: 'tiktok', videoId: '7486522369935297847' },
      { type: 'instagram', url: 'https://www.instagram.com/p/DFcaHrNAE38/?igsh=MWJtMjFidWsxZnBuYQ%3D%3D' },
      { type: 'tiktok', videoId: '7395327411442732318' },
      // { type: 'instagram', url: 'https://www.instagram.com/p/DLoXRGkuu11/' },
      { type: 'insight', 
        title: '2.2. Learning', 
        text: 'Importantly, for Gen Z one point of view isn\'t enough. They\'re obsessed with absorbing it all, including people who think \
        outside the mainstream. They are often hooked on content that goes against the status quo and rallies against institutional \
        systems and their respective ideologies.' },
      { type: 'tiktok', videoId: '7462111297077857567' },
      { type: 'tiktok', videoId: '7527468995901984013' },
      { type: 'tiktok', videoId: '7379026970950044970' },
      { type: 'tiktok', videoId: '7395327411442732318' },
      { type: 'insight', 
        title: '3. Misrepresentaton, Misinformation, and Cancel Culture', 
        text: 'Social media platforms give everyone a voice. While this democratisation of storytelling can be \
        powerful, it also means that extreme experiences, sensational claims, and controversial opinions spread just as \
        easily as balanced or evidence-based perspectives. \
        \\n\\n Content provoking strong emotions, including negative ones like fear, shock, and outrage, garner more \
        engagement and virality. What begins as a single post can quickly snowball. \
        \\n\\n **Doom Scrolling**: A casual search or chance encounter with one post can spiral into a rabbit hole of \
        fear-driven content, reinforcing anxiety and keeping users hooked.' },
      { type: 'insight', 
        title: '3.1 Misrepresentation', 
        text: 'A single horror story or anomaly can achieve viral reach, often stripped of context and presented \
        as the norm. This can distort perception and drive public opinion based on exceptions rather than evidence.' },
      { type: 'tiktok', videoId: '7398375230420323614' },
      { type: 'image', src: 'images/IMG_8875.png' },
      { type: 'insight', 
        title: '3.2 Misinformation', 
        text: 'Even with regulations and moderation, misinformation spreads easily. The gray zone of ‚Äúnot proven wrong, but not \
        proven right‚Äù is particularly problematic, especially when amplified on platforms with massive audiences.' },
      { type: 'tiktok', videoId: '7486518164843416837' },
      { type: 'image', src: 'images/IMG_8867.png' },
      { type: 'insight', 
        title: '3.3. Cancel Culture', 
        text: 'In a similar vein to the above, when brands, influencers, or celebrities launch a poorly judged post, it doesn/\'t \
        get forgotten. In fact, creators often make sure to bring it back to light if the respective individual or brand tries to \
        ‚Äúmove on‚Äù and act as though it never happened.' },
      { type: 'instagram', url: 'https://www.instagram.com/p/DM5smgfS5CT/' },
      { type: 'twitter', url: 'https://x.com/banbadmen/status/1870030466381721913' },
      { type: 'insight', 
        title: '4. Identity and Expression', 
        text: 'Gen Z is drawn to content that reflects their sense of ever evolving identity.' },
      { type: 'insight', 
        title: '4.1. Fluid Identity', 
        text: 'The digital landscape this generation immerses themself in strongly champions the idea being many things all at once. \
        They are exposed to huge swaths of new information daily which has created an affinity to embracing diversity rather than \
        pigeonholing themself to one identity.' },  
      { type: 'tiktok', videoId: '7124404544460573998' },
      { type: 'instagram', url: 'https://www.instagram.com/p/DKDaJg4CiYR/' },
      { type: 'tiktok', videoId: '7123685232489958702' },
      { type: 'insight', 
        title: '4.2. Embracing Contradictions', 
        text: 'They embrace fluidity to the point of welcoming contradictions and unexpected mash-ups. When executed well, these \
        juxtapositions create a sense of novelty, something especially valuable in today\'s sea of digital noise.' },
      { type: 'tiktok', videoId: '7538169457596730655' },
      { type: 'image', src: 'images/IMG_8870.png' },
      { type: 'tiktok', videoId: '7458831430114675974' },
      { type: 'image', src: 'images/IMG_8900.png' },      
      { type: 'twitter', url: 'https://x.com/skye_Z2/status/1949969710000283990' },
      // { type: 'instagram', url: 'https://www.instagram.com/p/C_ElTquy_4P/' },
      // { type: 'tiktok', videoId: '' },
      { type: 'insight', 
        title: '4.3. Self Expression', 
        text: 'For Gen Z, social media is a primary space for self-expression and storytelling, whether sharing passions, dreams, or fears.' },
      { type: 'tiktok', videoId: '7437447356615757074' },
      { type: 'insight', 
        title: '4.4. Vulnerability', 
        text: 'They are notably comfortable with vulnerability and even ‚Äúoversharing,‚Äù using openness as a way to build connection, community, and belonging.' },
      { type: 'tiktok', videoId: '7427342683997359390' },
      { type: 'tiktok', videoId: '7438305251003813152' },
      { type: 'insight', 
        title: '5. Humour', 
        text: 'If you know, you know.' },
      { type: 'insight', 
        title: '5.1. Unseriousness', 
        text: 'Gen Z are the masters of being \'seriously unserious\' - whilst they are vocal about \
        social injustices, politics and the environment, they also love to layer their own internet language and trends - to make the serious unserious.' },
      { type: 'tiktok', videoId: '7429405840580545838' },
      { type: 'instagram', url: 'https://www.instagram.com/p/DND0mCRR14q/' },
      { type: 'insight', 
        title: '5.2. Memes', 
        text: 'If there is one thing Gen Z love, its memes. For Gen Z, memes are more than just entertainment, they\'re a generational \
        language. Memes act as shorthand for complex ideas, emotions, or cultural commentary, compressing meaning into instantly \
        recognisable formats.  Their feeds are saturated with this visual and linguistic code: meme templates, reaction images, \
        layered in-jokes, and semiotic references that rely on shared digital literacy.' },
      { type: 'image', src: 'images/Screenshot 2025-08-20 at 14.08.25.png' },
      { type: 'image', src: 'images/Screenshot 2025-08-20 at 13.48.36.png' },
      { type: 'insight', 
        title: '5.3. Speaking in Code', 
        text: 'Because of this, Gen Z is highly fluent in *meme syntax*, the grammar of remixing, reframing, and subverting \
        existing formats to create something new. What might look like nonsense to outsiders is actually a dense, context-rich \
        form of communication. Meme syntax and generational slang serve as social glue, a way to signal belonging, wit, and cultural \
        awareness in an attention economy where speed and relatability matter most.' },
      { type: 'image', src: 'images/4a83e976139837c2e4c3f0b27a37dc4f.jpeg' },
      { type: 'instagram', url: 'https://www.instagram.com/reel/CqBKHDbI6iH/' },
      { type: 'image', src: 'images/IMG_8914.png' },
      { type: 'tiktok', videoId: '7445391286607154462' },
      { type: 'twitter', url: 'https://x.com/tracebelll/status/1931784190439346329' }
    ];

    const feed = document.getElementById('feed');
    const tpl  = document.getElementById('cardTpl');

    // --- TikTok Player helpers (iframe-based) --------------------------------

    const ttPlayers = new WeakMap(); // iframe -> state

    function postToPlayer(iframe, type, value) {
      try {
        iframe.contentWindow && iframe.contentWindow.postMessage({ 'x-tiktok-player': true, type, value }, '*');
      } catch {}
    }
    window.addEventListener('message', (ev) => {
      const data = ev.data || {};
      if (!data || !data['x-tiktok-player']) return;
      const iframes = Array.from(document.querySelectorAll('iframe.tt-player'));
      for (const f of iframes) {
        // We don't get a target in data, so we just mark all visible iframes ready on first ready event
        // and rely on play/pause logic to control only the intersecting one.
        const st = ttPlayers.get(f) || {};
        if (data.type === 'onPlayerReady') st.ready = true;
        if (data.type === 'onStateChange') st.state = data.value;
        ttPlayers.set(f, st);
      }
    });

    // --- Card Factory ---------------------------------------------------------
    const safeIg = (url) => {
      try {
        const u = new URL(url);
        if (!u.pathname.endsWith('/')) u.pathname += '/';
        u.search = ''; u.hash = '';
        return u.toString();
      } catch { return url; }
    };

    function makeCard(post) {
      const frag = tpl.content.cloneNode(true);
      const art = frag.querySelector('article');
      const wrap = frag.querySelector('.mediaWrap');
      const scroll = frag.querySelector('.card-scroll');

      if (post.type === 'tiktok') {
        art.dataset.kind = 'tiktok';
        art.dataset.vid = post.videoId;

        art.__mount = () => {
          const holder = document.createElement('div');
          holder.className = 'tiktok-wrap';
          holder.style.minHeight = '500px';

          // Lazy-load iframe only on mount
          const iframe = document.createElement('iframe');
          iframe.className = 'tt-player';
          iframe.src = `https://www.tiktok.com/embed/v2/${post.videoId}?lang=en`;
          iframe.allowFullscreen = true;
          iframe.setAttribute('allow', 'encrypted-media; fullscreen;');
          iframe.setAttribute('loading', 'lazy');
          iframe.frameBorder = 0;
          iframe.style.width = '100%';
          iframe.style.aspectRatio = '9 / 16';
          iframe.style.overflow = 'hidden';      
          iframe.style.pointerEvents = 'auto';

          const touchGuard = document.createElement('div');
          touchGuard.className = 'tiktok-touch-guard';
          touchGuard.tabIndex = 0;
          touchGuard.appendChild(iframe);
          holder.appendChild(touchGuard);
          wrap.appendChild(holder);

          art.setAttribute('aria-busy', 'false');
        };

        art.__unmount = () => {
          const holder = wrap.querySelector('.tiktok-wrap');
          if (holder) holder.remove(); // clean up to free memory
        };
      } else if (post.type === 'instagram') {
        art.dataset.kind = 'instagram';
        art.__mount = () => {
          const holder = document.createElement('div');
          holder.innerHTML = '<blockquote class="instagram-media" data-instgrm-captioned data-instgrm-permalink="' +
            safeIg(post.url) +
            '" data-instgrm-version="14" style="background:#FFF;border:0;border-radius:3px;box-shadow:0 0 1px rgba(0,0,0,.5),0 1px 10px rgba(0,0,0,.15);margin:1px;max-width:540px;min-width:326px;width:100%;"></blockquote>';
          wrap.appendChild(holder);
          loadScriptOnce('https://www.instagram.com/embed.js', '__ig').then(() => {
            window.instgrm && window.instgrm.Embeds && window.instgrm.Embeds.process();
          });
          art.setAttribute('aria-busy', 'false');
        };
      } else if (post.type === 'twitter') {
        art.dataset.kind = 'twitter';
        art.__mount = () => {
          const holder = document.createElement('div');
          wrap.appendChild(holder);
          const id = (post.url && (post.url.match(/status\/(\d{5,})/) || [])[1]);
          if (!id) { holder.innerHTML = '<p><a target="_blank" rel="noopener" href="'+(post.url||'#')+'">View on X</a></p>'; art.setAttribute('aria-busy','false'); return; }
          loadScriptOnce('https://platform.twitter.com/widgets.js', '__tw').then(() => {
            window.twttr && window.twttr.widgets && window.twttr.widgets.createTweet(id, holder, { align: 'center', dnt: true });
          });
          art.setAttribute('aria-busy', 'false');
        };
      } else if (post.type === 'insight') {
        art.__mount = () => {
          const box = document.createElement('section');
          box.className = 'insight';

          // Parse text: split on literal \n\n, then support **bold** and *italic*
          const paragraphs = (post.text || '')
            .split('\\n\\n')
            .map((para) => {
              const formatted = para
                .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>') // bold
                .replace(/\*(.+?)\*/g, '<em>$1</em>');             // italic
              return `<p>${formatted.trim()}</p>`;
            })
            .join('');

          box.innerHTML = `
            <img class="brand-header" src="images/logo.png" alt="Logo">
            <h2>${post.title || 'Insight'}</h2>
            ${paragraphs}
          `;

          wrap.appendChild(box);
          art.setAttribute('aria-busy', 'false');
        };
      } else if (post.type === 'image') {
          art.dataset.kind = 'image';
          art.__mount = () => {
            const img = document.createElement('img');
            img.src = post.src;
            img.alt = post.alt || 'Image';
            img.loading = 'lazy';
            img.style.width = '100%';
            img.style.borderRadius = '12px';
            img.style.objectFit = 'contain';
            img.style.aspectRatio = '9 / 16';
            wrap.appendChild(img);
            art.setAttribute('aria-busy', 'false');
          };
        }

      return frag;
    }

    // Load a script once
    function loadScriptOnce(src, flag) {
      return new Promise((resolve) => {
        if (window[flag]) return resolve();
        const s = document.createElement('script');
        s.async = true; s.src = src;
        s.onload = () => { window[flag] = true; resolve(); };
        s.onerror = () => resolve();
        document.head.appendChild(s);
      });
    }

    const arts = FEED.map((post) => {
      const frag = makeCard(post);
      const art = frag.querySelector('article');
      feed.appendChild(frag);
      art.__mounted = false;
      return art;
    });


    // Lazy mount + lookahead
    const rootEl = feed;
    const AHEAD = 2;
    const io = new IntersectionObserver((entries) => {
      entries.forEach((e) => {
        if (!e.isIntersecting) return;
        const art = e.target;
        // mount now
        if (typeof art.__mount === 'function') { art.__mount(); art.__mount = null; }
        // small lookahead
        const idx = arts.indexOf(art);
        for (let k = 1; k <= AHEAD; k++) {
          const n = arts[idx + k];
          if (n && typeof n.__mount === 'function') {
            (window.requestIdleCallback || window.requestAnimationFrame)(() => { n.__mount(); n.__mount = null; });
          }
        }
        io.unobserve(art);
      });
    }, { root: rootEl, rootMargin: '800px 0px', threshold: 0.01 });

    arts.forEach((a) => io.observe(a));

    // Eagerly mount first
    if (arts.length && typeof arts[0].__mount === 'function') { arts[0].__mount(); arts[0].__mount = null; }

    // --- Autoplay controller (play the card in view, pause others) -----------
    const playIo = new IntersectionObserver((entries) => {
      // We only ever want a single playing TikTok at a time
      // Pause all first
      const iframes = Array.from(document.querySelectorAll('iframe.tt-player'));
      for (const f of iframes) { postToPlayer(f, 'pause'); }

      for (const e of entries) {
        if (!e.isIntersecting) continue;
        const art = e.target;
        if (art.dataset.kind === 'tiktok') {
          const iframe = art.querySelector('iframe.tt-player');
          if (iframe) {
            postToPlayer(iframe, 'play');
          }
        }
        break; // only first visible
      }
    }, { root: rootEl, threshold: 0.6 });

    //
    const mediaIo = new IntersectionObserver((entries) => {
      for (const entry of entries) {
        const el = entry.target;
        if (entry.isIntersecting) {
          if (el.__mount && !el.__mounted) {
            el.__mount();
            el.__mounted = true;
          }
        }
      }
    }, { root: rootEl, threshold: 0.1 });

    // Start observing all cards for off-screen unmount/remount
    setTimeout(() => {
      arts.forEach((a) => mediaIo.observe(a));
    }, 300);

    // Observe only TikTok cards for autoplay
    function refreshPlayObservers() {
      arts.forEach((a) => { if (a.dataset.kind === 'tiktok') playIo.observe(a); });
    }
    // Wait a tick so some iframes exist
    setTimeout(refreshPlayObservers, 300);

    // Keyboard up/down to advance
    rootEl.addEventListener('keydown', (e) => {
      if (e.key !== 'ArrowDown' && e.key !== 'ArrowUp') return;
      e.preventDefault();
      const list = Array.from(document.querySelectorAll('.card'));
      const top0 = rootEl.getBoundingClientRect().top;
      let idx = 0, min = Infinity;
      for (let i = 0; i < list.length; i++) {
        const top = Math.abs(list[i].getBoundingClientRect().top - top0);
        if (top < min) { min = top; idx = i; }
      }
      const next = e.key === 'ArrowDown' ? Math.min(idx+1, list.length-1) : Math.max(idx-1, 0);
      list[next].scrollIntoView({ behavior: 'smooth', block: 'start' });
    }, { passive: false });

  })();
  </script>
</body>
</html>
